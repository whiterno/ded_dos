;-----------------------------------------------------------------------------
;                 Задание # 10. Файл 10ax2hex.asm
; Вывод на экран содержимого регистра ax в шестнадцатиричной системе
;                (c) 2001 Copyleft  Andreev Andrey
;----------------------------------------------------------------------------
.model tiny

.code
org 100h

start:
                mov bx, 0b800h
                mov es, bx
                mov di, 16*2
                std             ; установка флага уменьшения di

                mov ax, 0f5h    ; число в ах, которое надо показать в hex'e
                mov dl, 16d     ; то, на что будем делить ах для перевода

again:          div dl 		; деление
                cmp ah, 10d
		jl first_sym	; ah < 10
		jae second_sym  ; ah >= 10

next:           mov dh, al      ; запоминание частного
                xchg ah, al     ; поменять местами частное и остаток
                mov ah, 4eh     ; цвет вывода
                stosw           ; вывод символа
                mov al, dh      ; восстановление частного
                mov ah, 0       ; обнуление остатка
                cmp al, 0       ; если частное - нуль, то цикл НЕ повторяется
                jne again

                mov ax, 4c00h   ; выход
                int 21h

first_sym:	add ah, '0'
		jmp next

second_sym:	add ah, 'A' - 10
		jmp next

end start
;----------------------------------------------------------------------------
;                     Конец...
;----------------------------------------------------------------------------